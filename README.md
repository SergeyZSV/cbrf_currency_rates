# CBRF API

## Описание

Этот проект обеспечивает выгрузку курсов валют через API Центрального банка Российской Федерации (ЦБРФ), загрузку этих данных в базу данных Google BigQuery и расчет среднемесячного курса валют с использованием SQL-скриптов.

## Основные функции

- **Выгрузка курсов валют**: Получение курсов валют через API ЦБРФ.
- **Загрузка в BigQuery**: Загружает курсы валют в Google BigQuery.
- **Расчет среднемесячного курса**: SQL-скрипты для вычисления среднемесячного курса валют.

## Установка и настройка

1. **Клонирование репозитория**:
    ```bash
    git clone https://github.com/username/CBRFAPIProject.git
    cd CBRFAPIProject
    ```

2. **Создание и активация виртуального окружения (опционально)**:
    ```bash
    python3 -m venv venv
    source venv/bin/activate  # Для Windows: venv\Scripts\activate
    ```

3. **Установка зависимостей**:
    ```bash
    pip install -r requirements.txt
    ```

4. **Настройка API ЦБРФ**:
    - Проверьте документацию [API ЦБРФ](https://www.cbr.ru/development/sxml/) для получения актуальных URL и параметров.

5. **Настройка Google BigQuery**:
    - Активируйте BigQuery API в вашем проекте Google Cloud.
    - Настройте аутентификацию и предоставьте необходимые разрешения для загрузки данных.

6. **Настройка переменных окружения**:
    - Создайте файл `.env` в корневом каталоге проекта и добавьте необходимые переменные (например, параметры подключения к BigQuery).

## Примеры использования

1. **Выгрузка данных из ЦБРФ**:
    ```bash
    python cbrf_data_extractor.py
    ```

2. **Расчет среднемесячного курса валют**:
    - Откройте файл `currency_average.sql` в вашем SQL-редакторе.
    - Выполните запросы для вычисления среднемесячного курса валют.

## Зависимости

- Python 3.8 или выше
- `requests`
- `google-cloud-bigquery`
- `pandas`
- `numpy`
- `pandas-gbq`
- Другие зависимости перечислены в файле `requirements.txt`.
